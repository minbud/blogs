---
title: ethernet
date: 2018-06-23 20:56:39
tags: 计算机网络
---

## 1. 以太网最小帧长
　　以太网中的最小帧长为64字节（包括以太网帧的前后部分：14+4字节）。亦即数据段为46字节。  
　　64字节的计算过程涉及以太网的载波监听冲突检测机制。基本原理是一个发送端需要在发送完数据前能够监听到在此信道上在它之前已经开始发送数据的发送冲突。在最极端的情况下，两个发送端距离最远，第一个发送端A在开始发送数据后，数据在经过t时间后会到达发送端B，在到达之前B监听不到数据因此也开始发送数据，B开始发送后随机监听到A的数据，因此发出阻塞信号。经过时间t后阻塞信号到达A，要求此时A数据还没有发送完毕，才能检测到数据发送出错。也就是发送数据的时间要大于2t。  
　　标准规定，10Mbps以太网采用中继器时，连接最大长度为2500米，最多经过4个中继器，信号在介质中传输速度小于光速c，一般范围为0.6~0.8c，取0.7c，则最大传输时延为（2500*4）/0.7c,因此规定对于10Mbps以太网规定一帧的最小发送时间必须为51.2μs。
　　51.2 μs为512bit即64字节数据在10Mbps以太网下的发送时间。  

<!--more-->
　　
## 2. MAC地址 & IP地址
　　MAC地址和IP地址都可以用来标识主机，为什么不只用其中的一个？  
### 1. 如果只用IP地址
　　如果不用mac地址，所有设备都只有IP地址，那么有两种情况：IP地址是出厂分配的；IP地址是由路由器动态分配的；  
　　第一种情况下，IP地址会不够用；另外，由于是出厂分配的，那么设备在接入不同的网络时，便无法利用IP地址的网络号、子网号等来进行路由，会导致路由表需要不断的更新，且路由表会很大。  
　　第二种情况下，在设备还没有分配到IP地址前，由于设备没有标识，便无法与路由器通信，进而也不可能被分配到IP地址。
### 2. 如果只用MAC地址
　　设备只有MAC地址，也会遇到只用IP地址时所遇到的情况，分析过程一样。
### 3. 其他
　　数据包中的IP地址是终点地址，而mac地址则是下一跳地址，经过路由器时IP地址不会改变而mac则会变化。
　　
## 3. 集线器（hub） & 交换机（网桥） & 路由器
　　集线器工作在物理层，交换机工作在数据链路层，路由器工作在网络层。  
　　集线器的数据传输方式是广播，只对物理信号进行放大中继，所有端口属于一个冲突域；而交换机则基于MAC地址，能够完成数据包到合适端口的转发，每个端口是一个独立的冲突域。路由器转发基于IP地址，能够隔绝广播域。  
　　集线器所有端口共享集线器的总带宽；交换机每个端口都有自己的带宽，因而多个端口队之间可以同时传输数据。  
　　交换机具有全双工的工作模式，也就是可以同时发送和接受数据，而集线器只有半双工模式。  
　　交换机用于组建局域网，路由器将组好的局域网连接起来。 
